(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{7163:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/newb",function(){return n(7433)}])},6171:function(e,t,n){"use strict";n.d(t,{ON:function(){return a},wS:function(){return r},a$:function(){return o}});var r={};n.r(r),n.d(r,{getBlogBySlug:function(){return h},getBlogs:function(){return c},getListings:function(){return d},getSlugs:function(){return f},postBlog:function(){return g}});var o={};n.r(o),n.d(o,{postComment:function(){return p}});var a={};n.r(a),n.d(a,{login:function(){return y},validate:function(){return m}});var i=n(9669),l=[{createdAt:"THE BOT ERA",description:"Cannot reach the server at this moment. Please try again later!",comments:[{name:"Server Bot",comment:"Oh Snap! Server Under Maintainance!",createdAt:"THE BOT ERA!"}]}],s=n.n(i)().create({baseURL:"http://ec2-3-110-191-56.ap-south-1.compute.amazonaws.com:3000"});s.interceptors.response.use((function(e){var t=e.data;return{data:null===t||void 0===t?void 0:t.data,error:!1}}),(function(e){return console.log("ERROR : ",e.config.url),(void 0===(t=e.config.url)?"":t).includes("blogs")?{data:l}:{data:null,error:!0};var t}));var u=s,c=function(){return u.get("/blogs")},d=function(){return u.get("/slugs-titles")},f=function(){return u.get("/slugs")},g=function(e){var t=e.description,n=e.title,r=e.token;return u.post("/blogs",{description:t,title:n},{headers:{Authorization:"Bearer "+r}})},h=function(e){return u.get("/blog/"+e)},p=function(e){u.post("/comment",e)},y=function(e){return u.post("/manage/api/v1/signin",e)},m=function(e){return u.post("/manage/api/v1/validateRequest",e,{headers:{Authorization:"Bearer "+e}})}},7433:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(5666),o=n.n(r),a=n(5893),i=n(7294),l=n(6968),s=n(7873),u=n(6986),c=n(4716),d=n(1532),f=n(6470),g=n.n(f),h=n(6171),p=n(1163),y=n(9041),m=n(715),v=n(4845),b=n.n(v),S=n(6437),T=n.n(S);function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function O(e,t){return!t||"object"!==w(t)&&"function"!==typeof t?_(e):t}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}var N=function(e){B(n,e);var t=R(n);function n(e){var r;return x(this,n),(r=t.call(this,e)).state={editorState:y.EditorState.createEmpty(),typing:!1,typingTimeout:0},r.focus=function(){return r.refs.editor.focus()},r.onChange=function(e){var t=_(r);t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({editorState:e,typing:!1,typingTimeout:setTimeout((function(){localStorage.setItem(b().BLOG,(0,m.cn)(r.state.editorState.getCurrentContent()))}),T().TYPING_TIMEOUT_FOR_BLOG)})},r.handleKeyCommand=r._handleKeyCommand.bind(_(r)),r.mapKeyToEditorCommand=r._mapKeyToEditorCommand.bind(_(r)),r.toggleBlockType=r._toggleBlockType.bind(_(r)),r.toggleInlineStyle=r._toggleInlineStyle.bind(_(r)),r}return E(n,[{key:"_handleKeyCommand",value:function(e,t){var n=y.RichUtils.handleKeyCommand(t,e);return!!n&&(this.onChange(n),!0)}},{key:"_mapKeyToEditorCommand",value:function(e){if(9!==e.keyCode)return(0,y.getDefaultKeyBinding)(e);var t=y.RichUtils.onTab(e,this.state.editorState,4);t!==this.state.editorState&&this.onChange(t)}},{key:"_toggleBlockType",value:function(e){this.onChange(y.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(y.RichUtils.toggleInlineStyle(this.state.editorState,e))}},{key:"render",value:function(){var e=this.state.editorState,t="RichEditor-editor",n=e.getCurrentContent();return n.hasText()||"unstyled"!==n.getBlockMap().first().getType()&&(t+=" RichEditor-hidePlaceholder"),(0,a.jsxs)("div",{className:"RichEditor-root",children:[(0,a.jsx)(U,{editorState:e,onToggle:this.toggleBlockType}),(0,a.jsx)(G,{editorState:e,onToggle:this.toggleInlineStyle}),(0,a.jsx)("div",{className:t,onClick:this.focus,children:(0,a.jsx)(y.Editor,{blockStyleFn:L,customStyleMap:I,editorState:e,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.mapKeyToEditorCommand,onChange:this.onChange,placeholder:"Tell a story...",ref:"editor",spellCheck:!0})})]})}}]),n}(i.Component),I={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}};function L(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}}var P=function(e){B(n,e);var t=R(n);function n(){var e;return x(this,n),(e=t.call(this)).onToggle=function(t){t.preventDefault(),e.props.onToggle(e.props.style)},e}return E(n,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),(0,a.jsx)("span",{className:e,onMouseDown:this.onToggle,children:this.props.label})}}]),n}(i.Component),K=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code Block",style:"code-block"}],U=function(e){var t=e.editorState,n=t.getSelection(),r=t.getCurrentContent().getBlockForKey(n.getStartKey()).getType();return(0,a.jsx)("div",{className:"RichEditor-controls",children:K.map((function(t){return(0,a.jsx)(P,{active:t.style===r,label:t.label,onToggle:e.onToggle,style:t.style},t.label)}))})},M=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"}],G=function(e){var t=e.editorState.getCurrentInlineStyle();return(0,a.jsx)("div",{className:"RichEditor-controls",children:M.map((function(n){return(0,a.jsx)(P,{active:t.has(n.style),label:n.label,onToggle:e.onToggle,style:n.style},n.label)}))})},H=N,A=n(7673);function D(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(u){return void n(u)}l.done?t(s):Promise.resolve(s).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){D(a,r,o,i,l,"next",e)}function l(e){D(a,r,o,i,l,"throw",e)}i(void 0)}))}}var q=function(){var e=(0,p.useRouter)(),t=(0,i.useState)(""),n=t[0],r=t[1],f=(0,i.useState)(!0),y=f[0],m=f[1],v=(0,i.useState)(!0),S=v[0],T=v[1],_=(0,i.useState)(""),x=_[0],C=_[1],E=F(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===x){e.next=17;break}if("yes"!==(r=prompt("Proceed with the Blog? (yes/y)"))&&"y"!==r){e.next=17;break}return e.prev=3,T(!0),e.next=7,h.wS.postBlog({description:localStorage.getItem(b().BLOG),title:x,token:n});case 7:e.sent.error&&alert("Error! User auth failure."),T(!1),console.log("Now is Loading is "+S),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),alert("Request Failed. Probable Reason : Network Problem!"),T(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));(0,i.useEffect)(F(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!1),e.abrupt("return",(0,a.jsx)("div",{}));case 2:case"end":return e.stop()}}),e)}))),[]),(0,i.useEffect)(F(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==y){t.next=11;break}return t.next=3,h.ON.validate(localStorage.getItem(b().JSON_WEB_TOKEN));case 3:if(!t.sent.error){t.next=8;break}return alert("You must be logged in"),e.push("/signin"),t.abrupt("return");case 8:r(localStorage.getItem(b().JSON_WEB_TOKEN)),T(!1),m(!0);case 11:case"end":return t.stop()}}),t)}))),[y]);return S?(0,a.jsx)("div",{className:g().loading,children:(0,a.jsx)(l.Z,{animation:"grow"})}):(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("br",{}),(0,a.jsx)(A.h,{title:"Create Blog"}),(0,a.jsxs)(s.Z,{onSubmit:function(e){return E(e)},children:[(0,a.jsxs)(u.Z,{controlId:"formBasicTitle",children:[(0,a.jsx)(c.Z,{placeholder:"Title",onChange:function(e){return function(e){C(e.target.value)}(e)},value:x}),(0,a.jsx)(s.Z.Text,{className:"text-muted"})]}),(0,a.jsx)(H,{}),(0,a.jsx)("br",{}),(0,a.jsx)(d.Z,{variant:"primary",type:"submit",children:"Submit"})]}),"undefined"!==typeof localStorage&&localStorage.getItem(b().BLOG)&&"<p></p>"!==localStorage.getItem(b().BLOG)&&(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("hr",{}),(0,a.jsxs)("div",{className:"jumbotron",children:[(0,a.jsx)("h4",{children:"Previous Blog detected"}),(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:localStorage.getItem(b().BLOG)}})]})]})]})}},6437:function(e){"use strict";e.exports={TYPING_TIMEOUT_FOR_BLOG:5e3}},4845:function(e){"use strict";e.exports={JSON_WEB_TOKEN:"jwtToken",BLOG:"blog",EMAIL:"email"}},6470:function(e){e.exports={MainContainer:"dash_MainContainer__U42_1",loading:"dash_loading__Yv37S"}}},function(e){e.O(0,[774,669,470,715,888,179],(function(){return t=7163,e(e.s=t);var t}));var t=e.O();_N_E=t}]);